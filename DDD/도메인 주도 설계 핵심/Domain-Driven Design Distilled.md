# 도메인 주도 설계 핵심
# 1장 나에게 도메인 주도 설계는
## 전락적 설계
전략적 설계는 세세한 구현으로 들어가기에 앞서 두꺼운 붓 터치처럼 사용하며, 비즈니스상 전략적으로 중요한 것, 중요도에 따라 일을 나누는 방법 그리고 필요에 따라 통합하는 최적의 방법을 강조한다.  
  
바운디드 컨텍스트라는 전략적 설계 패턴을 사용해서 도메인 모델을 분리하는 방법부터 배운다.  
바운디드 컨텍스트 안의 도메인 모델에서 보편언어(Ubiquitous Language)를 개발하는 방법에 대해서도 살펴볼 것이다.  
  
컨텍스트 매핑이라는 기술을 통해 여러 개의 바운디드 컨텍스트를 통합하는 방법도 확인 할 수 있을 것이다.  
컨텍스트 맵은 2개의 바운디드 컨텍스트를 통합하면서 그 사이에 존재하는 팀의 관계, 기술적 메커니즘을 정의한다.  
## 전술적 설계
전술적 설계는 도메인 모델의 세부사항들을 그리기 위해 얇은 붓을 사용하는 것과 같다.  
가장 중요한 도구 중 하나는 엔티티와 값 객체(Value Object)를 알맞은 크기의 애그리게잇으로 묶는 데 사용하는 에그리게잇(Aggregate) 패턴이다.  
  
DDD는 도메인을 최대한 명확한 방법으로 모델링하는 것에 관한 것이다.  
도메인 이벤트의 사용은 명확하게 모델링하는 것을 도와주면서, 도메인에 발생한 것에 대해 알아야 하는 내용을 시스템과 공유하는 것을 돕는다. 공유할 대상이 로컬의 바운디드 컨텍스트일 수도, 다른 원격의 바운디드 컨텍스트일 수도 있다.  
  
# 2장 바운디드 컨텍스트 및 보편언어와 전략적 설계
**DDD는 주로 명확하게 바운디드 컨텍스트 내에서 보편언어를 모델링하는 것에 대한 것이다.**  
첫째, 바운디드 컨텍스트는 의미적으로 동일한 컨텍스트의 범위를 표현한다. 이것은 그 범주 내에서 소프트웨어 모델의 각 컴포넌트는 특정한 의미를 갖고, 특정한 일을 수행한다는 의미다. 바운디드 컨텍스트 내에 존재하는 컴포넌트들은 컨텍스트에 특화돼 있으며, 컨텍스트 안에서 의미가 살아난다.  
  
바운디드 컨텍스트는 모델이 구현되는 곳이고, 바운디드 컨텍스트마다 각각 분리된 소프트웨어 산출물이 나온다.  
  
컨텍스트 범위 내의 소프트웨어 모델은 바운디드 컨텍스트 안에서 일하는 팀이 생성하고, 그 안에서 기능하는 소프트웨어 모델을 만드는 모든 팀 구성원이 사용하는 언어를 반영한다. 이 언어는 팀 구성원들이 이야기할 때 사용되고, 소프트웨어 모델 안에 구현되기 때문에 보편언어라고 부른다.  
  
바운디드 컨텍스트가 조직의 핵심 전략적 계획으로 개발되고 있을 때, 이를 핵심 도메인이라고 한다.  
  
바운디드 컨텍스트는 마치 언어의 경계와 비슷하다. DDD의 경우, 보편적 언어라는 것은 소프트웨어 모델을 소유하는 팀이 이야기할 때 사용하는 것이고, 이 언어의 대표적인 기록 형태는 소프트웨어 모델의 소스 코드다.  
  
각각의 바운디드 컨텍스트는 단일 팀에만 할당돼야 하고, 각 바운디드 컨텍스트마다 독립적인 소스 코드 리파지토리가 있어야 한다.  
한 팀은 다수의 바운디드 컨텍스트에 대해 일을 할 수 있지만, 다수의 팀이 하나의 바운디드 컨텍스트를 수행할 수는 없다.  
보편언어를 나눈 것과 같은 방법으로 바운디드 컨텍스트마다 소스 코드와 데이터베이스 스키마도 명확히 분리한다.  
메인 소스 코드와 함께 인수 테스트와 단위 테스트를 유지해야 한다.  
  
하나의 바운디드 컨텍스트를 한 팀이 수행한다는 것은 특히 중요한데, 이는 다른 팀이 소스 코드르 변경할 때 반갑지 않은 문제가 발생할 가능성을 완전히 제거할 수 있기 때문이다.  
  
**각 팀은 각자의 소스 코드와 데이터베이스를 소유하고, 공식 인터페이스를 정의해서 바운디드 컨텍스트를 다른 팀이 사용할 수 있게 허용한다.**이것이 DDD 사용의 이점이다.  
  
각자의 도메인 모델을 작고 관리할 수 있는 정도에서 시작했다고 해도 점점 더 많은 개념이 쌓이는 것을 언제 멈춰야 하는지 모를 때가 자주 있을 것이다. 하지만 각 팀들은 더 많은 개념을 계속 추가한다. 이는 나중에 커다란 문제로 발전한다. 다수의 언어가 혼재되면서 점차 모델 내의 언어가 모호해지기 시작한다.  
  
큰 진흙 덩어리는 비즈니스 전문가의 이야기에 귀를 기울이지 않은 채, 소프트웨어 개발 팀이 제멋대로 노력한 결과다.  
  
사업 부서는 세 곳인데 세 가지 정책 모두를 하나의 정책으로 통합하려고 한다면, 분명 문제가 발생할 것이다.  
반면, DDD는 서로 다른 개념들을 각기 다른 바운디드 컨텍스트 안으로 분리해 놓음으로써 **개념 간 차이**를 더욱 중시한다. 즉, 각기 다른 언어와 그에 따른 기능이 존재하는 것을 인정하는 것이다.  
  
예를 들어, 정책에 세 가지 의미가 존재한다면, 3개의 바운디드 컨텍스트가 있고, 각 컨텍스트들은 그들만의 고유한 정책적 특성을 포함한 정책을 갖는다. 바운디드 컨텍스트의 이름으로 범위를 관리한다. 각 정책들의 이름은 3개의 모든 바운디드 컨텍스트 내에서 단순히 정책으로 표현한다.  
  

